<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="author" content="SofiaC++"><meta name="description"><title>Namespaces&mdash;Advanced C++</title><link href="/advanced-cpp/favicon.png" rel="icon"><link rel="alternate" href="/advanced-cpp/atom.xml" title="config.title" type="application/atom.xml"><link href="/advanced-cpp/bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet"><link href="/advanced-cpp/bower_components/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet"><link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css" rel="stylesheet"><style>body { padding-top: 50px; }</style></head><body><div class="container"><nav role="navigation" class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#navbar" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">Advanced C++</a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href="/advanced-cpp/categories/news/">News</a></li><li><a href="/advanced-cpp/categories/slides/">Slides</a></li><li><a href="/advanced-cpp/about/">About</a></li></ul></div></div></nav><div class="page-header"><h1><a href="/advanced-cpp/">Advanced C++</a></h1><p id="site-slogan">Site for the Advanced C++ course at FMI</p></div><div class="row"><div class="col-sm-9"><section id="content"><article class="post"><h2>Namespaces</h2><div class="meta">12 Mar 2017 in <a href="/advanced-cpp/categories/slides/">slides</a>&ensp;</div><a href="/advanced-cpp/slides/07_namespaces.html" class="btn btn-large btn-primary">Slide Show</a><p>section
section
:markdown
## Namespaces</p>
<pre><code>        Namespace is a group of functions, classes, constants and
        variables.

section
    :markdown
        ### Namespaces

        * Allow us to group related functions / classes
        * Prevent name clashes between different parts of code
        * Allow us to hide implementation details 

section
    :markdown

        Namespaces are open, i.e. you can define different members of
        the namespace in different files.

section
    :cxx

        namespace ui
        {
            class Button;
        }

section
    :markdown
        ### `using namespace`

        `using namespace std` brings all the names from the
        `std` namespaces in the the current scope - namespace,
        function, block.

section
    :markdown
        ### `using namespace`

        It is a really practice to use `using namespace` at
        anything but function or block level in headers.

        You never know where this header is going to be included.

section
    :markdown
        ### `using namespace`

        It is a good practice to avoid `using namespace` at
        anything but function or block level.

        Otherwise the names may clash in a *unity* build

section
    :markdown
        ### *unity* build

        Building the whole program/library from a single (or reduced
        number of) translation units. It is implemented as
        `#include`-ing multiple C++ source files in a single C++
        file and compiling it instead of the original files.

section
    :markdown
        ### *unity* build

        * speeds up build by reducing
          * template instantiation duplicates
          * functions that need to be linked
        * allows the compiler to inline more functions (because their
          definitions are visible)

section
    :markdown
        ### *Anonymous* namespaces

        * `namespace` without a name
        * allow private definitions for translation unit
          * definitions in anonymous namespaces are global for the
            translation unit
          * they can not be accessed by any other translation unit

section
    :cxx
        namespace {
            int aswer();
        }
</code></pre>
<p>section
section
:markdown
## Argument Dependent Lookup (ADL)</p>
<pre><code>        * a.k.a Koenig Lookup

section
    :markdown
        ### ADL

        What is the interface of a type T?

section
    ul
        li.fragment.fade-in public methods of T
        li.fragment.fade-in any function that takes T as an argument

section
    :markdown
        ### Unqualified call

        Calling a function without explicitly specifying the namespace
        of the function.

        The compiler searches matching function declarations for an
        unqualified call in the current namespace and in the
        associated namespaces of each argument type for the call

section
    :cxx
        namespace math {
            class Polynom {
            };

            std::ostream&amp; operator&lt;&lt; (std::ostream&amp; output,
                const Polynom&amp; p)
            {
                // ...
            }

            void swap(Polynom&amp; l, Polynom&amp; r);
        }

        int main() {
            Polynom p;
            // finds the operator &lt;&lt; in math
            std::cout &lt;&lt; p &lt;&lt; std::endl;
        }

section
    :markdown
        ### `use function` trick

        * bring a set of definitions from a namespace to the current
          scope
        * use an unqualified call for the function

section
    :cxx
        template &lt;typename T, typename A, typename I&gt;
        void fast_erase(std::vector&lt;T, A&gt;&amp; v, I iterator)
        {
            // bring all std swap overloads
            using std::swap;

            // ADL finds math::swap(Polynom&amp;, Polynom&amp;)
            swap(*iterator, v.back());

            v.pop_back();
        }

        std::vector&lt;Polynom&gt; v;

        fast_erase(v, v.begin());

section
    :markdown
        ## Associated namespaces

        * primitive types have no associated namespaces
        * the associated namespace of user defined type T are:
          * the namespace where T is defined
          * the namespaces of T base classes
</code></pre>
</article><div class="row-fluid"><div class="col-md-12"><hr><ul class="pagination"><li><a href="/advanced-cpp/2017/03/12/library/" title="Previous articles">&larr; Previous</a></li><li><a href="/advanced-cpp/2017/03/05/smart-resources/" title="Next articles">Next &rarr;</a></li></ul></div></div></section></div><div class="col-sm-3"><nav role="navigation" class="navbar navbar-default"><div class="navbar-header"><div class="navbar-brand">Recent Posts</div></div><div class="clearfix"></div><ul class="nav navbar-stacked"><li><a href="/advanced-cpp/2017/05/12/midterm-test-2/">Midterm test</a></li><li><a href="/advanced-cpp/2017/05/01/allocators/">Memory management and allocators</a></li><li><a href="/advanced-cpp/2017/04/25/sample-tests/">Sample Test</a></li><li><a href="/advanced-cpp/2017/04/24/virtual/">Virtual functions and inheritance</a></li><li><a href="/advanced-cpp/2017/04/19/midterm-test/">Midterm test</a></li><li><a href="/advanced-cpp/2017/04/14/algorithms/">STL Algorithms</a></li><li><a href="/advanced-cpp/2017/04/11/iterators/">STL Iterators</a></li><li><a href="/advanced-cpp/2017/04/04/containers/">STL Containers</a></li></ul></nav></div></div><footer id="page-footer"><footer><div class="row-fluid"><div class="col-md-12"><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" width="88px" height="31px" src="/advanced-cpp/images/cc-by-sa.png"></a><br><span>Advanced C++</span> by<span> SofiaC++</span> is licensed under a&nbsp;<a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International
License
</a></div></div></footer><script src="/advanced-cpp/bower_components/jquery/dist/jquery.min.js"></script><script src="/advanced-cpp/bower_components/bootstrap/dist/js/bootstrap.min.js"></script><script src="/advanced-cpp/snippet.js"></script></footer></div></body></html>